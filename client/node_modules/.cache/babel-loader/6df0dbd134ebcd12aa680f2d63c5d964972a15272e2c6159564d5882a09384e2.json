{"ast":null,"code":"import _slicedToArray from\"C:/Users/shukl/Desktop/AryanShukla-Graded-Coding-Assignment-React-main/moviesOnTheTip/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import NavigationBar from\"../Components/NavigationBar\";import Card from\"../Components/Card\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Home=function Home(){var _useState=useState('movies-in-theaters'),_useState2=_slicedToArray(_useState,2),selectedCategory=_useState2[0],setSelectedCategory=_useState2[1];var isFavouriteTab=selectedCategory==='favourit';var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchString=_useState4[0],setSearchString=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),movies=_useState6[0],setMovies=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),favouritMovieNames=_useState8[0],setFavouritMovieNames=_useState8[1];useEffect(function(){var fetchUrl=\"http://localhost:4000/\".concat(selectedCategory);if(searchString){fetchUrl=\"http://localhost:4000/\".concat(selectedCategory,\"?title_like=\").concat(searchString);}console.log('fetchUfrl',fetchUrl);fetch(\"http://localhost:4000/favourit/?title_like=\".concat(searchString)).then(function(response){return response.json();}).then(function(data){var movieNames=data.map(function(item){return item.title;});setFavouritMovieNames(movieNames);if(selectedCategory==='favourit')setMovies(data);});if(selectedCategory!=='favourit'){fetch(fetchUrl).then(function(response){return response.json();}).then(function(data){setMovies(data);});}},[selectedCategory,searchString]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavigationBar,{selectCategory:setSelectedCategory,searchStr:setSearchString}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"0 60px\"},children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Movies (\",selectedCategory.replaceAll(\"-\",\" \"),\")\"]}),searchString?/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Search results for string : \"}),\" \",searchString]}):null,movies.length!==0?/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"row\",flexWrap:\"wrap\",justifyContent:\"flex-start\"},children:movies.map(function(data,id){var isAlreadyAdded=favouritMovieNames.includes(data.title);return/*#__PURE__*/_jsx(Card,{movieData:data,movieCategory:selectedCategory,isFavouriteTab:isFavouriteTab,setMovies:setMovies,isDisabledBtn:isAlreadyAdded},\"\".concat(id,\" \").concat(data.title));})}):/*#__PURE__*/_jsx(\"div\",{children:\"No Movies Found......\"})]})]});};export default Home;","map":{"version":3,"names":["React","useEffect","useState","NavigationBar","Card","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","_useState","_useState2","_slicedToArray","selectedCategory","setSelectedCategory","isFavouriteTab","_useState3","_useState4","searchString","setSearchString","_useState5","_useState6","movies","setMovies","_useState7","_useState8","favouritMovieNames","setFavouritMovieNames","fetchUrl","concat","console","log","fetch","then","response","json","data","movieNames","map","item","title","children","selectCategory","searchStr","style","margin","replaceAll","length","display","flexDirection","flexWrap","justifyContent","id","isAlreadyAdded","includes","movieData","movieCategory","isDisabledBtn"],"sources":["C:/Users/shukl/Desktop/AryanShukla-Graded-Coding-Assignment-React-main/moviesOnTheTip/client/src/Pages/Home.jsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport NavigationBar from \"../Components/NavigationBar\";\nimport Card from \"../Components/Card\";\n\nconst Home = () => {\n    const [selectedCategory, setSelectedCategory] = useState('movies-in-theaters');\n    const isFavouriteTab = selectedCategory === 'favourit';\n    const [searchString, setSearchString] = useState('');\n    const [movies, setMovies] = useState([]);\n    const [favouritMovieNames, setFavouritMovieNames] = useState([]);\n\n    useEffect(() => {\n        let fetchUrl = `http://localhost:4000/${selectedCategory}`;\n        if (searchString) {\n            fetchUrl = `http://localhost:4000/${selectedCategory}?title_like=${searchString}`\n        }\n        console.log('fetchUfrl', fetchUrl);\n        fetch(`http://localhost:4000/favourit/?title_like=${searchString}`)\n            .then(response => response.json())\n            .then(data => {\n                const movieNames = data.map(item => item.title);\n                setFavouritMovieNames(movieNames)\n                if (selectedCategory === 'favourit') setMovies(data);\n            });\n        if (selectedCategory !== 'favourit') {\n            fetch(fetchUrl)\n                .then(response => response.json())\n                .then(data => {\n                    setMovies(data);\n                });\n        }\n    }, [selectedCategory, searchString]);\n\n    return (\n        <>\n            <NavigationBar selectCategory={setSelectedCategory} searchStr={setSearchString}/>\n            <br/>\n            <div style={{\n                margin: \"0 60px\"\n            }}>\n                <h3>\n                    Movies ({selectedCategory.replaceAll(\"-\", \" \")})\n                </h3>\n                {searchString ? <span><b>Search results for string : </b> {searchString}</span> : null}\n                {movies.length !== 0 ?\n                    <div style={{\n                        display: \"flex\",\n                        flexDirection: \"row\",\n                        flexWrap: \"wrap\",\n                        justifyContent: \"flex-start\",\n\n                    }}>\n                        {movies.map((data, id) => {\n                            const isAlreadyAdded = favouritMovieNames.includes(data.title);\n                            return <Card key={`${id} ${data.title}`} movieData={data} movieCategory={selectedCategory}\n                                         isFavouriteTab={isFavouriteTab} setMovies={setMovies}\n                                         isDisabledBtn={isAlreadyAdded}/>\n                        })}\n                    </div> : <div>No Movies Found......</div>\n                }\n            </div>\n\n\n        </>\n    );\n\n}\n\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}